<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  height:100%;
  background:transparent;
  display:flex;
  justify-content:center;
  align-items:center;
}
svg{
  width:80vmin;
  height:80vmin;
  background:transparent;
}
circle{
  fill:#00ff99;
  cursor:pointer;
  transition:cx 0.05s, cy 0.05s;
}
</style>
</head>
<body>

<svg id="knobLayer" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
  <circle id="knob" cx="20" cy="80" r="3" />
</svg>

<script>
const knob = document.getElementById('knob');
const svg  = document.getElementById('knobLayer');

let dragging = false;
let segment  = 'vertical'; // start along the left line

svg.addEventListener('mousedown', e => {
  if (e.target === knob) dragging = true;
});
window.addEventListener('mouseup', () => dragging = false);

svg.addEventListener('mousemove', e => {
  if (!dragging) return;

  const rect = svg.getBoundingClientRect();
  const x = ((e.clientX - rect.left) / rect.width) * 100;
  const y = ((e.clientY - rect.top) / rect.height) * 100;

  if (segment === 'vertical') {
    const newY = Math.max(20, Math.min(80, y)); // limit up/down
    knob.setAttribute('cx', 20);
    knob.setAttribute('cy', newY);
    // switch to horizontal at the corner
    if (newY >= 79) segment = 'horizontal';
  } else if (segment === 'horizontal') {
    const newX = Math.max(20, Math.min(80, x)); // limit left/right
    knob.setAttribute('cx', newX);
    knob.setAttribute('cy', 80);
    // switch back if pulled left
    if (newX <= 21) segment = 'vertical';
  }
});
</script>

</body>
</html>
